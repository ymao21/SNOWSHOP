{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yiningmao/Desktop/SNOWSHOP Project/SNOWSHOP/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yiningmao/Desktop/SNOWSHOP Project/SNOWSHOP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import Cookies from'js-cookie';export function csrfFetch(_x){return _csrfFetch.apply(this,arguments);}function _csrfFetch(){_csrfFetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var options,res,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:options=_args.length>1&&_args[1]!==undefined?_args[1]:{};options.method=options.method||'GET';options.headers=options.headers||{};if(options.method.toUpperCase()!=='GET'){options.headers['Content-Type']=options.headers['Content-Type']||'application/json';options.headers['XSRF-Token']=Cookies.get('XSRF-TOKEN');}_context.next=6;return window.fetch(url,options);case 6:res=_context.sent;if(!(res.status>=400)){_context.next=9;break;}throw res;case 9:return _context.abrupt(\"return\",res);case 10:case\"end\":return _context.stop();}},_callee);}));return _csrfFetch.apply(this,arguments);}export function restoreCSRF(){return csrfFetch('/api/csrf/restore');}","map":{"version":3,"names":["Cookies","csrfFetch","_x","_csrfFetch","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","options","res","_args","wrap","_callee$","_context","prev","next","length","undefined","method","headers","toUpperCase","get","window","fetch","sent","status","abrupt","stop","restoreCSRF"],"sources":["/Users/yiningmao/Desktop/SNOWSHOP Project/SNOWSHOP/frontend/src/store/csrf.js"],"sourcesContent":["import Cookies from 'js-cookie';\n\nexport async function csrfFetch(url, options = {}) {\n\n  options.method = options.method || 'GET';\n\n  options.headers = options.headers || {};\n\n  if (options.method.toUpperCase() !== 'GET') {\n    options.headers['Content-Type'] =\n      options.headers['Content-Type'] || 'application/json';\n    options.headers['XSRF-Token'] = Cookies.get('XSRF-TOKEN');\n  }\n  const res = await window.fetch(url, options);\n\n  if (res.status >= 400) throw res;\n\n  return res;\n}\n\nexport function restoreCSRF() {\n    return csrfFetch('/api/csrf/restore');\n  }\n"],"mappings":"kTAAA,MAAO,CAAAA,OAAO,KAAM,WAAW,CAE/B,eAAsB,CAAAC,SAASA,CAAAC,EAAA,SAAAC,UAAA,CAAAC,KAAA,MAAAC,SAAA,GAgB9B,SAAAF,WAAA,EAAAA,UAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAhBM,SAAAC,QAAyBC,GAAG,MAAAC,OAAA,CAAAC,GAAA,CAAAC,KAAA,CAAAR,SAAA,QAAAE,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAEP,OAAO,CAAAE,KAAA,CAAAM,MAAA,IAAAN,KAAA,MAAAO,SAAA,CAAAP,KAAA,IAAG,CAAC,CAAC,CAE/CF,OAAO,CAACU,MAAM,CAAGV,OAAO,CAACU,MAAM,EAAI,KAAK,CAExCV,OAAO,CAACW,OAAO,CAAGX,OAAO,CAACW,OAAO,EAAI,CAAC,CAAC,CAEvC,GAAIX,OAAO,CAACU,MAAM,CAACE,WAAW,CAAC,CAAC,GAAK,KAAK,CAAE,CAC1CZ,OAAO,CAACW,OAAO,CAAC,cAAc,CAAC,CAC7BX,OAAO,CAACW,OAAO,CAAC,cAAc,CAAC,EAAI,kBAAkB,CACvDX,OAAO,CAACW,OAAO,CAAC,YAAY,CAAC,CAAGtB,OAAO,CAACwB,GAAG,CAAC,YAAY,CAAC,CAC3D,CAACR,QAAA,CAAAE,IAAA,SACiB,CAAAO,MAAM,CAACC,KAAK,CAAChB,GAAG,CAAEC,OAAO,CAAC,QAAtCC,GAAG,CAAAI,QAAA,CAAAW,IAAA,MAELf,GAAG,CAACgB,MAAM,EAAI,GAAG,GAAAZ,QAAA,CAAAE,IAAA,eAAQ,CAAAN,GAAG,eAAAI,QAAA,CAAAa,MAAA,UAEzBjB,GAAG,2BAAAI,QAAA,CAAAc,IAAA,MAAArB,OAAA,GACX,UAAAN,UAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,MAAO,SAAS,CAAA0B,WAAWA,CAAA,CAAG,CAC1B,MAAO,CAAA9B,SAAS,CAAC,mBAAmB,CAAC,CACvC"},"metadata":{},"sourceType":"module","externalDependencies":[]}