{"ast":null,"code":"var _jsxFileName = \"/Users/yiningmao/Desktop/SNOWSHOP Project/SNOWSHOP/frontend/src/components/ProductDetails/ProductDetails.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport './ProductDetails.css';\nimport { getProductDetailThunk, deleteProductThunk } from '../../store/products';\nimport { useParams, useHistory } from 'react-router-dom';\nimport OpenModalButton from '../OpenModalButton';\nimport EditProductForm from '../ProductForm/EditProductForm';\nimport ReviewList from '../ReviewList/ReviewList';\nimport { addToCartThunk } from '../../store/cart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductDetail = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    productId\n  } = useParams();\n  const history = useHistory();\n  const sessionUser = useSelector(state => state.session.user);\n  const product = useSelector(state => state.productState[productId]);\n  const isOwner = sessionUser && sessionUser.id === (product === null || product === void 0 ? void 0 : product.userId);\n  const [showDescription, setShowDescription] = useState(false);\n  useEffect(() => {\n    dispatch(getProductDetailThunk(productId));\n  }, [dispatch, productId]);\n  const deleteHandler = () => {\n    dispatch(deleteProductThunk(productId));\n    history.push(`/products`);\n  };\n  const handleAddToCart = () => {\n    const cartId = sessionUser === null || sessionUser === void 0 ? void 0 : sessionUser.currentCart.id;\n    dispatch(addToCartThunk({\n      productId,\n      cartId\n    }));\n    history.push(`/cart/${sessionUser === null || sessionUser === void 0 ? void 0 : sessionUser.currentCart.id}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"productBackgroundContainer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ProductDetailContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"productimg\",\n        src: product === null || product === void 0 ? void 0 : product.previewImageUrl,\n        alt: \"productimg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productInfoName\",\n          children: [\"Name: \", product === null || product === void 0 ? void 0 : product.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productInfoPrice\",\n          children: [\"$ \", product === null || product === void 0 ? void 0 : product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `productInfoDesc ${showDescription ? 'showDescription' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"descriptionToggle\",\n            onClick: () => setShowDescription(!showDescription),\n            children: showDescription ? 'Hide Description' : 'Show Description'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 13\n          }, this), showDescription && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: product === null || product === void 0 ? void 0 : product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productInfodet\",\n          children: [\"Color: \", product === null || product === void 0 ? void 0 : product.color]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productInfodet\",\n          children: [\"Type: \", product === null || product === void 0 ? void 0 : product.type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add\",\n          onClick: handleAddToCart,\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OpenModalButton, {\n      productId: productId,\n      className: \"EditProductModal\",\n      modalComponent: /*#__PURE__*/_jsxDEV(EditProductForm, {\n        productId: productId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }, this),\n      buttonText: \"Edit Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"DeleteBtn\",\n      onClick: deleteHandler,\n      children: \"Delete Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviewListContainer\",\n      children: /*#__PURE__*/_jsxDEV(ReviewList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductDetail, \"lDKIxLqaikpzpKpOAOijBU9Mumw=\", false, function () {\n  return [useDispatch, useParams, useHistory, useSelector, useSelector];\n});\n_c = ProductDetail;\nexport default ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["useEffect","useState","useSelector","useDispatch","getProductDetailThunk","deleteProductThunk","useParams","useHistory","OpenModalButton","EditProductForm","ReviewList","addToCartThunk","jsxDEV","_jsxDEV","ProductDetail","_s","dispatch","productId","history","sessionUser","state","session","user","product","productState","isOwner","id","userId","showDescription","setShowDescription","deleteHandler","push","handleAddToCart","cartId","currentCart","className","children","src","previewImageUrl","alt","fileName","_jsxFileName","lineNumber","columnNumber","name","price","onClick","description","color","type","modalComponent","buttonText","_c","$RefreshReg$"],"sources":["/Users/yiningmao/Desktop/SNOWSHOP Project/SNOWSHOP/frontend/src/components/ProductDetails/ProductDetails.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport './ProductDetails.css';\nimport { getProductDetailThunk, deleteProductThunk } from '../../store/products';\nimport { useParams, useHistory } from 'react-router-dom';\nimport OpenModalButton from '../OpenModalButton';\nimport EditProductForm from '../ProductForm/EditProductForm';\nimport ReviewList from '../ReviewList/ReviewList';\nimport { addToCartThunk } from '../../store/cart';\n\nconst ProductDetail = () => {\n  const dispatch = useDispatch();\n  const { productId } = useParams();\n  const history = useHistory();\n  const sessionUser = useSelector(state => state.session.user);\n  const product = useSelector(state => state.productState[productId]);\n  const isOwner = sessionUser && sessionUser.id === product?.userId;\n  const [showDescription, setShowDescription] = useState(false);\n\n  useEffect(() => {\n    dispatch(getProductDetailThunk(productId));\n  }, [dispatch, productId]);\n\n  const deleteHandler = () => {\n    dispatch(deleteProductThunk(productId));\n    history.push(`/products`);\n  };\n\n  const handleAddToCart = () => {\n    const cartId = sessionUser?.currentCart.id;\n    dispatch(addToCartThunk({ productId, cartId }));\n    history.push(`/cart/${sessionUser?.currentCart.id}`);\n  };\n\n  return (\n    <div className='productBackgroundContainer'>\n      <div className=\"ProductDetailContainer\">\n        <img className='productimg' src={product?.previewImageUrl} alt=\"productimg\" />\n        <div className='productInfo'>\n          <div className='productInfoName'>Name: {product?.name}</div>\n          <div className='productInfoPrice'>$ {product?.price}</div>\n          <div className={`productInfoDesc ${showDescription ? 'showDescription' : ''}`}>\n            <button className=\"descriptionToggle\" onClick={() => setShowDescription(!showDescription)}>\n              {showDescription ? 'Hide Description' : 'Show Description'}\n            </button>\n            {showDescription && <p>{product?.description}</p>}\n          </div>\n          <div className='productInfodet'>Color: {product?.color}</div>\n          <div className='productInfodet'>Type: {product?.type}</div>\n          <button className=\"add\" onClick={handleAddToCart}>Add to Cart</button>\n        </div>\n      </div>\n\n      <OpenModalButton\n        productId={productId}\n        className=\"EditProductModal\"\n        modalComponent={<EditProductForm productId={productId} />}\n        buttonText=\"Edit Product\"\n      />\n\n      {isOwner && <button className=\"DeleteBtn\" onClick={deleteHandler}>Delete Product</button>}\n\n      <div className='reviewListContainer'>\n        <ReviewList />\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}