{"ast":null,"code":"import { csrfFetch } from \"./csrf\";\nconst LOAD_CART = '/cart/LOAD_CART';\nconst ADD_CART = '/cart/ADD_CART';\nconst REMOVE_CART = '/cart/REMOVE_CART';\nconst EDIT_QUANTITY = '/cart/EDIT_QUANTITY';\nconst CLEAR_CART = '/cart/CLEAR_CART';\n\n// Action creators\nexport const loadToCart = products => {\n  return {\n    type: LOAD_CART,\n    products\n  };\n};\nexport const addToCart = product => {\n  return {\n    type: ADD_CART,\n    product\n  };\n};\nexport const editQuantity = (cartItemId, newQuantity) => {\n  return {\n    type: EDIT_QUANTITY,\n    cartItemId,\n    newQuantity\n  };\n};\nexport const deleteFromCart = ProductId => {\n  return {\n    type: CLEAR_CART,\n    ProductId\n  };\n};\nexport const clearCart = () => {\n  return {\n    type: REMOVE_CART\n  };\n};\nexport const loadAllCartThunk = () => async dispatch => {\n  const response = await csrfFetch('/api/cart');\n  if (response.ok) {\n    const cartItems = await response.json();\n    dispatch(loadToCart(cartItems));\n    return cartItems;\n  }\n  return response;\n};\nexport const addToCartThunk = productId => async dispatch => {\n  const response = await csrfFetch(`/products/${productId}`);\n  if (response.ok) {\n    const product = await response.json();\n    dispatch(addToCart(product));\n    return product;\n  }\n  return response;\n};\nexport const deleteCartThunk = productId => async dispatch => {\n  const response = await csrfFetch(`/api/cart/${productId}`, {\n    method: 'DELETE'\n  });\n  if (response.ok) {\n    const removeFromCart = await response.json();\n    dispatch(deleteFromCart(removeFromCart));\n    return removeFromCart;\n  }\n};\nconst initialState = {\n  cartItems: []\n};\nconst cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case LOAD_CART:\n      return {\n        ...state,\n        cartItems: action.products\n      };\n    case ADD_CART:\n      return {\n        ...state,\n        cartItems: [...state.cartItems, action.product]\n      };\n    case EDIT_QUANTITY:\n      return {\n        ...state,\n        cartItems: state.cartItems.map(item => item.id === action.cartItemId ? {\n          ...item,\n          quantity: action.newQuantity\n        } : item)\n      };\n    case DELETE_REVIEW:\n      newState = {\n        ...state\n      };\n      delete newState[action.reviewId];\n      return newState;\n    case CLEAR_CART:\n      return {\n        ...state,\n        cartItems: []\n      };\n    default:\n      return state;\n  }\n};\nexport default cartReducer;","map":{"version":3,"names":["csrfFetch","LOAD_CART","ADD_CART","REMOVE_CART","EDIT_QUANTITY","CLEAR_CART","loadToCart","products","type","addToCart","product","editQuantity","cartItemId","newQuantity","deleteFromCart","ProductId","clearCart","loadAllCartThunk","dispatch","response","ok","cartItems","json","addToCartThunk","productId","deleteCartThunk","method","removeFromCart","initialState","cartReducer","state","arguments","length","undefined","action","map","item","id","quantity","DELETE_REVIEW","newState","reviewId"],"sources":["/Users/yiningmao/Desktop/SNOWSHOP Project/SNOWSHOP/frontend/src/store/cart.js"],"sourcesContent":["import { csrfFetch } from \"./csrf\";\n\nconst LOAD_CART = '/cart/LOAD_CART';\nconst ADD_CART = '/cart/ADD_CART';\nconst REMOVE_CART = '/cart/REMOVE_CART';\nconst EDIT_QUANTITY = '/cart/EDIT_QUANTITY';\nconst CLEAR_CART = '/cart/CLEAR_CART';\n\n// Action creators\nexport const loadToCart = (products) => {\n  return {\n    type: LOAD_CART,\n    products,\n  };\n};\n\nexport const addToCart = (product) => {\n  return {\n    type: ADD_CART,\n    product,\n  };\n};\n\nexport const editQuantity = (cartItemId, newQuantity) => {\n  return {\n    type: EDIT_QUANTITY,\n    cartItemId,\n    newQuantity,\n  };\n};\n\nexport const deleteFromCart = (ProductId) => {\n  return {\n    type: CLEAR_CART,\n    ProductId\n  };\n};\n\nexport const clearCart = () => {\n  return {\n    type: REMOVE_CART,\n  };\n};\n\nexport const loadAllCartThunk = () => async (dispatch) => {\n  const response = await csrfFetch('/api/cart');\n\n  if (response.ok) {\n    const cartItems = await response.json();\n    dispatch(loadToCart(cartItems));\n    return cartItems;\n  }\n  return response;\n};\n\nexport const addToCartThunk = (productId) => async (dispatch) => {\n  const response = await csrfFetch(`/products/${productId}`);\n\n  if (response.ok) {\n    const product = await response.json();\n    dispatch(addToCart(product));\n    return product;\n  }\n  return response;\n};\n\n\nexport const deleteCartThunk = (productId) => async (dispatch) => {\n  const response = await csrfFetch(`/api/cart/${productId}`, {\n      method: 'DELETE'\n  })\n  if(response.ok) {\n      const removeFromCart = await response.json()\n      dispatch(deleteFromCart(removeFromCart))\n      return removeFromCart\n  }\n}\n\n\nconst initialState = {\n  cartItems: [],\n};\n\nconst cartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOAD_CART:\n      return {\n        ...state,\n        cartItems: action.products,\n      };\n    case ADD_CART:\n      return {\n        ...state,\n        cartItems: [...state.cartItems, action.product],\n      };\n    case EDIT_QUANTITY:\n      return {\n        ...state,\n        cartItems: state.cartItems.map((item) =>\n          item.id === action.cartItemId ? { ...item, quantity: action.newQuantity } : item\n        ),\n      };\n\n      case DELETE_REVIEW:\n        newState = {...state}\n        delete newState[action.reviewId]\n        return newState\n\n    case CLEAR_CART:\n      return {\n        ...state,\n        cartItems: [],\n      };\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}