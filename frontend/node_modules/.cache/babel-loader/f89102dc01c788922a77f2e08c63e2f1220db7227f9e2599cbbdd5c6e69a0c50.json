{"ast":null,"code":"import { csrfFetch } from \"./csrf\";\nconst LOAD_REVIEWS = 'reviews/loadReviews';\nconst CREATE_REVIEW = 'reviews/createReview';\nconst EDIT_REVIEW = 'reviews/editReview';\nconst DELETE_REVIEW = 'reviews/deleteReview';\nexport const loadReviews = reviews => {\n  return {\n    type: LOAD_REVIEWS,\n    reviews\n  };\n};\nexport const createReview = review => {\n  return {\n    type: CREATE_REVIEW,\n    review\n  };\n};\nexport const editReview = review => {\n  return {\n    type: EDIT_REVIEW,\n    review\n  };\n};\nexport const deleteReview = reviewId => {\n  return {\n    type: DELETE_REVIEW,\n    reviewId\n  };\n};\nexport const getReviewsThunk = productId => async dispatch => {\n  const response = await csrfFetch(`/api/products/${productId}/reviews`);\n  if (response.ok) {\n    const reviews = await response.json();\n    dispatch(loadReviews(reviews));\n    return reviews;\n  }\n};\nexport const createReviewThunk = (payload, sessionUser) => async dispatch => {\n  const response = await csrfFetch(`/api/products/${payload.productId}/reviews`, {\n    method: 'POST',\n    body: JSON.stringify(payload)\n  });\n  if (response.ok) {\n    const review = await response.json();\n    review.User = sessionUser;\n    dispatch(createReview(review));\n    return review;\n  }\n  return response;\n};\nexport const editReviewThunk = payload => async dispatch => {\n  const response = await csrfFetch(`/api/reviews/${payload.reviewId}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(payload)\n  });\n  if (response.ok) {\n    const review = await response.json();\n    dispatch(editReview(review));\n    return review;\n  }\n};\nexport const deleteReviewThunk = reviewId => async dispatch => {\n  const response = await csrfFetch(`/api/reviews/${reviewId}`, {\n    method: 'DELETE'\n  });\n  if (response.ok) {\n    const removeReview = await response.json();\n    dispatch(deleteReview(reviewId));\n    return removeReview;\n  }\n};\nconst initialState = {};\nconst reviewsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let newState = {\n    ...state\n  };\n  switch (action.type) {\n    case LOAD_REVIEWS:\n      action.reviews.forEach(review => {\n        newState[review.id] = review;\n      });\n      return newState;\n    case CREATE_REVIEW:\n      newState = {\n        ...state\n      };\n      newState[action.review.id] = action.review;\n      return newState;\n    case EDIT_REVIEW:\n      const EditReviewS = {\n        ...state\n      };\n      newState[action.review.id] = action.review;\n      return newState;\n    case DELETE_REVIEW:\n      newState = {\n        ...state\n      };\n      delete newState[action.reviewId];\n      return newState;\n    default:\n      return state;\n  }\n};\nexport default reviewsReducer;","map":{"version":3,"names":["csrfFetch","LOAD_REVIEWS","CREATE_REVIEW","EDIT_REVIEW","DELETE_REVIEW","loadReviews","reviews","type","createReview","review","editReview","deleteReview","reviewId","getReviewsThunk","productId","dispatch","response","ok","json","createReviewThunk","payload","sessionUser","method","body","JSON","stringify","User","editReviewThunk","headers","deleteReviewThunk","removeReview","initialState","reviewsReducer","state","arguments","length","undefined","action","newState","forEach","id","EditReviewS"],"sources":["/Users/yiningmao/Desktop/SNOWSHOP Project/SNOWSHOP/frontend/src/store/reviews.js"],"sourcesContent":["\nimport { csrfFetch } from \"./csrf\";\n\nconst LOAD_REVIEWS = 'reviews/loadReviews'\nconst CREATE_REVIEW = 'reviews/createReview'\nconst EDIT_REVIEW = 'reviews/editReview'\nconst DELETE_REVIEW = 'reviews/deleteReview'\n\nexport const loadReviews = (reviews) => {\n    return {\n    type: LOAD_REVIEWS,\n    reviews\n    }\n}\n\nexport const createReview = (review) => {\n    return {\n    type: CREATE_REVIEW,\n    review\n    }\n}\n\nexport const editReview = (review) => {\n    return {\n    type: EDIT_REVIEW,\n    review\n    }\n}\n\nexport const deleteReview = (reviewId) => {\n    return {\n        type: DELETE_REVIEW,\n        reviewId\n    }\n}\n\nexport const getReviewsThunk = (productId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/products/${productId}/reviews`);\n\n\n    if(response.ok){\n        const reviews = await response.json();\n        dispatch(loadReviews(reviews))\n        return reviews\n    }\n}\n\nexport const createReviewThunk = (payload, sessionUser) => async (dispatch) => {\n    const response = await csrfFetch(`/api/products/${payload.productId}/reviews`, {\n        method: 'POST',\n        body: JSON.stringify(payload)\n    });\n\n    if(response.ok) {\n        const review = await response.json()\n        review.User = sessionUser\n        dispatch(createReview(review));\n        return review\n    }\n    return response\n}\n\nexport const editReviewThunk = (payload) => async (dispatch) => {\n    const response = await csrfFetch(`/api/reviews/${payload.reviewId}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n\t\tbody: JSON.stringify(payload)\n    });\n\n    if(response.ok) {\n        const review = await response.json();\n        dispatch(editReview(review))\n        return review\n    }\n}\n\nexport const deleteReviewThunk = (reviewId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/reviews/${reviewId}`, {\n        method: 'DELETE'\n    })\n    if(response.ok) {\n        const removeReview = await response.json()\n        dispatch(deleteReview(reviewId))\n        return removeReview\n    }\n}\n\nconst initialState = {}\nconst reviewsReducer = (state = initialState, action) => {\n\n    let newState = {...state};\n    switch(action.type){\n        case LOAD_REVIEWS:\n\n            action.reviews.forEach((review) => {\n                newState[review.id] = review\n            });\n\n            return newState\n\n            case CREATE_REVIEW:\n                newState = { ...state };\n                newState[action.review.id] = action.review;\n                return newState;\n\n            case EDIT_REVIEW:\n                const EditReviewS = { ...state };\n                newState[action.review.id] = action.review;\n                return newState;\n\n            case DELETE_REVIEW:\n            newState = {...state}\n            delete newState[action.reviewId]\n            return newState\n\n        default:\n            return state;\n    }\n}\n\nexport default reviewsReducer\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}